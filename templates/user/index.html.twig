

{% extends 'base-admin.html.twig' %}

{% block title %}Tunisiens Du Monde | Nos membres{% endblock %}

{% block body %} 
    <div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
        <div class="breadcrumb-title pe-3"><i class="fadeIn animated bx bx-group"></i> Nos membres</div>
         
        <div class="ms-auto"> 
                <a href="{{ path('app_user_new') }}" type="button" class="btn btn-primary">Ajouter</a> 
        </div>
    </div>


    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table  ">
                    <thead>
                        <tr>
                            <th>#</th>  
                            
                            <th>Utilisateur</th>
                            <th>Résidence</th>  
                            <th>Ville d'origine</th> 
                            <th>Profession</th> 
                            <th>Age</th> 
                            
                            
                            <th>Role</th> 
                            <th>actions</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for user in users %}
                        <tr>
                            <td>{{ loop.index }}</td> 
                            <td>
                                <div class="d-flex">
                                    <div style="margin-right: 15px;">
                                        {% if user.photoURL != null %}
                                            <img src="{{ user.photoURL }}" width="80px" style="border-radius: 50%;" alt="">
                                        {% endif %}
                                        
                                    </div>
                                    <div>
                                        <p>
                                            
                                            {{ user.gender == 0 ? 'Mr' : 'Mme' }} {{ user.lastname }} {{ user.firstname }} </p>
                                        <p class="text-muted"><small>{{ user.email }}</small></p>
                                    </div>
                                </div>
                                
                            </td>
                            <td>
                                {% if user.country != null %}
                                    <p>{{ user.country.name }}</p>
                                <p><small class="text-muted">{{ user.ville }}</small></p>
                                {% endif %}
                                
                            </td>
                            <td>
                                {% if user.originTown != null %}
                                    {{ user.originTown.name }}

                                {% endif %}
                                
                            </td>   
                            <td>
                                {{ user.profession }}
                            </td>
                            <td>
                                {% if user.age != '' %}
                                {{ user.age }} ans
                                {% endif %}
                                
                            </td>
                            
                            <td>
                                <ul>
                                    {% for role in user.roles  %}
                                        <li>{{role}}</li>
                                    {% endfor %}
                                </ul>
                            </td>
                           
                            
                            <td>
                               

                                <a href="{{ path('app_user_edit', {'id': user.id}) }}" class="action-icon text-info btn">
                                    <i class="fadeIn animated bx bx-edit-alt"></i>
                                </a>

                 
                                    <form class="d-inline-block" method="post" action="{{ path('app_user_delete', {'id': user.id}) }}" onsubmit="return confirm('Êtes-vous sûr de bien vouloir supprimer cet élément?');">
                                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
                                        <button type="submit" class="btn"> <i  class="action-icon  text-danger fadeIn animated bx bx-trash-alt"  ></i></button>
                                    </form>


                            </td>
                        </tr>
                        
                    {% endfor %}
                    </tbody>
                </table>
            
            </div>
        </div>
    </div>
    
 
{% endblock %}


{% block javascripts %}
{{ parent() }}

<script>
    $(document).ready(function(){
        $('.datatable').DataTable();
    })
</script>
{% endblock %}